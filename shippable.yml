language: python

env:
  matrix:
    - TEST_GROUP=pytest
    - TEST_GROUP=flake8
    - TEST_GROUP=pylint

parallelized_test: true

before_install:
  - mkdir -p $HOME/env/
  - virtualenv -p /usr/bin/python2.7 $HOME/env/ --system-site-packages
  - source $HOME/env/bin/activate

install:
  - pip install -r requirements-dev.txt

before_script:
  - mkdir -p shippable/codecoverage shippable/testresults

script:
  - if [ "pytest" == "$TEST_GROUP" ]; then PYTHONPATH=. py.test --junit-xml=shippable/testresults/results.xml; fi
  - if [ "flake8" == "$TEST_GROUP" ]; then flake8 --verbose .; fi
  - if [ "pylint" == "$TEST_GROUP" ]; then pylint --py3k *.py; fi
